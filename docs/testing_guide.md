# راهنمای تست و اعتبارسنجی برنامه شبا

## مقدمه
این راهنما شامل دستورالعمل‌های کاملی برای تست و اعتبارسنجی برنامه موبایل فلاتر استعلام اطلاعات بانکی است.

## انواع تست‌ها

### 1. تست‌های واحد (Unit Tests)
تست‌های واحد برای بررسی عملکرد صحیح کلاس‌ها و متدهای مجزا:

```bash
# اجرای تست‌های واحد
flutter test
```

**فایل‌های تست واحد:**
- `test/token_manager_test.dart` - تست مدیریت توکن
- `test/api_service_test.dart` - تست سرویس‌های API
- `test/widget_test.dart` - تست ویجت‌ها

### 2. تست‌های یکپارچگی (Integration Tests)
تست‌های یکپارچگی برای بررسی عملکرد کل برنامه:

```bash
# اجرای تست‌های یکپارچگی
flutter test integration_test/app_test.dart
```

## چک‌لیست اعتبارسنجی

### ✅ عملکرد اصلی
- [ ] استعلام شبا با شماره کارت
- [ ] استعلام شبا با شماره حساب
- [ ] استعلام اطلاعات شبا
- [ ] مدیریت توکن با Supabase
- [ ] استعلام گروهی با فایل اکسل

### ✅ رابط کاربری
- [ ] طراحی واکنش‌گرا (Responsive)
- [ ] انیمیشن‌ها و ترانزیشن‌ها
- [ ] رنگ‌بندی و تم
- [ ] فونت فارسی (وزیر)
- [ ] نمایش صحیح اعداد فارسی

### ✅ اعتبارسنجی ورودی
- [ ] اعتبارسنجی شماره کارت (16 رقم + Luhn)
- [ ] اعتبارسنجی شماره حساب
- [ ] اعتبارسنجی شماره شبا (IR + 24 رقم)
- [ ] فرمت‌بندی خودکار ورودی‌ها

### ✅ مدیریت خطا
- [ ] نمایش پیام‌های خطای مناسب
- [ ] مدیریت خطاهای شبکه
- [ ] مدیریت خطاهای API
- [ ] بازیابی از خطاها

### ✅ عملکرد
- [ ] سرعت پاسخ‌دهی مناسب
- [ ] مدیریت حافظه
- [ ] عدم انسداد رابط کاربری
- [ ] بهینه‌سازی درخواست‌های شبکه

## تست‌های دستی

### 1. تست استعلام تکی
1. وارد کردن شماره کارت معتبر
2. بررسی فرمت‌بندی خودکار
3. کلیک روی دکمه استعلام
4. بررسی نمایش نتایج
5. تست قابلیت کپی شبا
6. تست دکمه استعلام جدید

### 2. تست استعلام گروهی
1. انتخاب فایل اکسل حاوی شماره کارت‌ها
2. بررسی نمایش تعداد کارت‌ها
3. شروع استعلام گروهی
4. بررسی نوار پیشرفت
5. بررسی نمایش آمار (موفق/خطا)
6. تست دانلود نتایج

### 3. تست مدیریت توکن
1. قطع اتصال اینترنت
2. تست عملکرد با توکن محلی
3. وصل کردن اینترنت
4. تست به‌روزرسانی توکن از Supabase

### 4. تست رابط کاربری
1. تست در اندازه‌های مختلف صفحه
2. تست چرخش صفحه
3. تست در حالت تاریک/روشن
4. تست دسترسی‌پذیری

## تست‌های خودکار

### اجرای تمام تست‌ها
```bash
# تست‌های واحد
flutter test

# تست‌های ویجت
flutter test test/widget_test.dart

# تست‌های یکپارچگی (نیاز به دستگاه/شبیه‌ساز)
flutter test integration_test/app_test.dart

# تحلیل کد
flutter analyze

# بررسی فرمت کد
dart format --set-exit-if-changed .
```

### تست عملکرد
```bash
# پروفایل عملکرد
flutter run --profile

# تحلیل اندازه برنامه
flutter build apk --analyze-size
```

## معیارهای موفقیت

### 1. عملکرد
- زمان پاسخ کمتر از 5 ثانیه برای استعلام تکی
- زمان پاسخ کمتر از 2 ثانیه برای هر استعلام در حالت گروهی
- مصرف حافظه کمتر از 100 مگابایت

### 2. قابلیت اطمینان
- نرخ موفقیت بالای 95% برای استعلام‌ها
- عدم کرش در شرایط عادی
- بازیابی مناسب از خطاها

### 3. تجربه کاربری
- رابط کاربری روان و واکنش‌گرا
- پیام‌های راهنما و خطای واضح
- سهولت استفاده برای کاربران مختلف

## گزارش‌دهی مشکلات

### اطلاعات مورد نیاز
1. نسخه برنامه
2. نسخه سیستم‌عامل
3. مدل دستگاه
4. مراحل بازتولید مشکل
5. پیام‌های خطا
6. اسکرین‌شات (در صورت امکان)

### کانال‌های گزارش
- GitHub Issues
- ایمیل پشتیبانی
- سیستم تیکت داخلی

## نکات مهم

### امنیت
- عدم ذخیره اطلاعات حساس در لاگ‌ها
- رمزنگاری ارتباطات
- اعتبارسنجی ورودی‌ها

### حریم خصوصی
- عدم ذخیره اطلاعات شخصی بدون اجازه
- حذف خودکار تاریخچه قدیمی
- شفافیت در استفاده از داده‌ها

### سازگاری
- تست روی نسخه‌های مختلف اندروید
- تست روی اندازه‌های مختلف صفحه
- پشتیبانی از زبان فارسی

## نتیجه‌گیری
این راهنما باید به‌طور منظم به‌روزرسانی شود و تست‌های جدید بر اساس ویژگی‌های اضافه شده به برنامه اضافه شوند.

